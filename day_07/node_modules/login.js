const { readFile } = require("./readAndWrite.js");

const File = "./user.json";

const login = async (user) => {
    const { email, password } = user;
    let message = " ";

    try {
        const users = await readFile(File);
        
        if (users.length === 0) {
            message = "No users found. Please register first.";
        } else {
            const existingUser = users.find((u) => u.email === email);
            
            if (!existingUser) {
                message = "User not found. Please register first.";
            } else if (existingUser.password === password) {
                message = "Login successful";
            } else {
                message = "Incorrect password. Please try again.";
            }
        }
    } catch (error) {
        message = "Error during login: " + error.message;
    }
    
    console.log(message);
};

login({ email: "john.doe@example.com", password: "password123" });
